<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Code Editor</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/46724d20dd.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="buttondiv">
        <input type="submit" class="my-button" value="Run" onclick="run()">
        <div>
            <button onclick="resetEditors()" class="resetbtn">Reset</button>
        </div>
    </div>
    <div class="container">

        <div class="left">
            <label><i class="fa-brands fa-html5" style="color: #FF4500;"></i>HTML</label>
            <textarea id="html-code" onclick="handleTextareaBlur()" onmouseout="emptyplaceholder()"></textarea>

            <label> <i class="fa-brands fa-css3" style="color:blue;"></i>CSS</label>
            <textarea id="css-code" onclick="handleTextarea1Blur()" onmouseout="emptyplaceholder1()"></textarea>

            <label> <i class="fa-brands fa-js" style="color:yellow;"></i>JAVASCRIPT</label>
            <textarea id="javascript-code" onclick="handleTextarea2Blur()" onmouseout="emptyplaceholder2()"></textarea>
        </div>
        <div class="right">
            <label> <i class="fa-solid fa-play" style="color:green;"></i>OUTPUT</label>
            <iframe id="output"></iframe>
        </div>
    </div>
    </div>

    <script>
        function resetEditors() {
        document.getElementById('html-code').value = '';
        document.getElementById('css-code').value = '';
        document.getElementById('javascript-code').value = '';
        }
        function run() {
            let htmlcode = document.getElementById("html-code").value;
            let csscode = document.getElementById("css-code").value;    // for input
            let javascriptcode = document.getElementById("javascript-code").value;
            let output = document.getElementById("output");

            output.contentDocument.body.innerHTML = htmlcode + "<style>" + csscode + "</style>"; //  output.contentDocument.body.innerHTML  it manipulate the code within the <iframe>   innerHTML provide the feature to access and modifying the html content within the body
            output.contentWindow.eval(javascriptcode);   //eval() function take input as string and execute it as javascript code
            // Clear the console output area
            consoleOutput.innerHTML = '';

            // Capture console.log output
            let oldConsoleLog = console.log;
            console.log = function (message) {
                oldConsoleLog.apply(console, arguments);
                consoleOutput.innerHTML += `<div class="console-line">${message}</div>`;
            };

            try {
                // Execute the JavaScript code
                output.contentWindow.eval(javascriptcode);
            } catch (error) {
                console.error(error);
                consoleOutput.innerHTML += `<div class="console-error">${error}</div>`;
            }
        }

        function handleTextareaBlur() {                             //The onblur attribute calls the handleTextareaBlur() JavaScript function when the textarea loses focus. This function checks if the textarea is empty, and if so, it restores the placeholder text.
            var textarea = document.getElementById('html-code');
            {
                textarea.placeholder = 'Enter your HTML code here';
            }
        }

        function handleTextarea1Blur() {
            var textarea = document.getElementById('css-code');
            {
                textarea.placeholder = 'Enter your CSS code here';
            }
        }
        function handleTextarea2Blur() {
            var textarea = document.getElementById('javascript-code');
            {
                textarea.placeholder = 'Enter your JAVASCRPIT code here';
            }

        }
        function emptyplaceholder() {
            var textarea = document.getElementById('html-code');
            {
                textarea.placeholder = '';
            }
        }
        function emptyplaceholder1() {
            var textarea = document.getElementById('css-code');
            {
                textarea.placeholder = '';
            }
        }
        function emptyplaceholder2() {
            var textarea = document.getElementById('javascript-code');
            {
                textarea.placeholder = '';
            }
        }  
    </script>
</body>

</html>